# Микросервисный проект

Микросервисное приложение с системой быстрого деплоя и автоматического мониторинга изменений.

## Структура проекта

```
gleb/
├── common/                 # Общий модуль
├── user/                   # User Service
├── point/                  # Point Service
├── statistic/              # Statistic Service
├── deploy/                 # Система деплоя
│   ├── scripts/           # Скрипты деплоя
│   ├── docs/              # Документация
│   └── Makefile           # Управление проектом
├── docker-compose.yml      # Production конфигурация
├── docker-compose.dev.yml  # Development конфигурация
└── README.md              # Этот файл
```

## Быстрый старт

### 1. Установка зависимостей

```bash
# Установка fswatch для мониторинга изменений
brew install fswatch  # macOS
sudo apt-get install fswatch  # Ubuntu
sudo yum install fswatch  # CentOS
```

### 2. Настройка системы деплоя

```bash
cd deploy
make setup
```

### 3. Запуск проекта

#### Docker режим (рекомендуется)
```bash
cd deploy
make dev
```

#### Локальный режим
```bash
cd deploy/scripts
./local-start.sh start
```

## Основные команды

### Docker режим
```bash
cd deploy

# Быстрый деплой
make dev

# Принудительная пересборка
make force

# Мониторинг изменений
make watch-all-ultra

# Очистка
make clean
```

### Локальный режим
```bash
cd deploy/scripts

# Запуск всех сервисов
./local-start.sh start

# Остановка всех сервисов
./local-start.sh stop

# Проверка статуса
./local-start.sh status
```

## Доступные сервисы

- **User Service**: http://localhost:8090
- **Point Service**: http://localhost:8091
- **Statistic Service**: http://localhost:8095
- **Grafana**: http://localhost:3000 (admin/admin)
- **Prometheus**: http://localhost:9090
- **RabbitMQ Management**: http://localhost:15673 (guest/guest)

## Документация

Подробная документация по использованию системы деплоя находится в папке `deploy/docs/`.

## Разработка

### Мониторинг изменений

```bash
cd deploy

# Мониторинг всех сервисов
make watch-all-ultra

# Мониторинг конкретного сервиса
make watch-user
make watch-point
make watch-statistic
```

### Пересборка сервисов

```bash
cd deploy

# Пересборка всех сервисов
make force

# Пересборка конкретного сервиса
make rebuild-user
make rebuild-point
make rebuild-statistic
```

## Требования

- Docker и Docker Compose
- Java 21
- Maven
- fswatch (для мониторинга изменений)

## Лицензия

Проект разработан для образовательных целей. 