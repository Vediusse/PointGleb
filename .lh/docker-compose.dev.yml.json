{
    "sourceFile": "docker-compose.dev.yml",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1754154957102,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754156646570,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,14 +116,18 @@\n       - \"8091:8091\"\n       - \"8062:8062\"\n     environment:\n       SPRING_PROFILES_ACTIVE: docker\n+      SPRING_DEVTOOLS_RESTART_ENABLED: \"true\"\n+      SPRING_DEVTOOLS_LIVERELOAD_ENABLED: \"true\"\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./point/src:/app/point/src\n       - ./common/src:/app/common/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n+      # Монтируем target для hot reload\n+      - ./point/target:/app/point/target\n     networks:\n       - gleb-network\n     depends_on:\n       postgres:\n@@ -140,14 +144,18 @@\n     ports:\n       - \"8095:8095\"\n     environment:\n       SPRING_PROFILES_ACTIVE: docker\n+      SPRING_DEVTOOLS_RESTART_ENABLED: \"true\"\n+      SPRING_DEVTOOLS_LIVERELOAD_ENABLED: \"true\"\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./statistic/src:/app/statistic/src\n       - ./common/src:/app/common/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n+      # Монтируем target для hot reload\n+      - ./statistic/target:/app/statistic/target\n     networks:\n       - gleb-network\n     depends_on:\n       postgres:\n"
                },
                {
                    "date": 1754176267926,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -116,18 +116,14 @@\n       - \"8091:8091\"\n       - \"8062:8062\"\n     environment:\n       SPRING_PROFILES_ACTIVE: docker\n-      SPRING_DEVTOOLS_RESTART_ENABLED: \"true\"\n-      SPRING_DEVTOOLS_LIVERELOAD_ENABLED: \"true\"\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./point/src:/app/point/src\n       - ./common/src:/app/common/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n-      # Монтируем target для hot reload\n-      - ./point/target:/app/point/target\n     networks:\n       - gleb-network\n     depends_on:\n       postgres:\n@@ -144,18 +140,14 @@\n     ports:\n       - \"8095:8095\"\n     environment:\n       SPRING_PROFILES_ACTIVE: docker\n-      SPRING_DEVTOOLS_RESTART_ENABLED: \"true\"\n-      SPRING_DEVTOOLS_LIVERELOAD_ENABLED: \"true\"\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./statistic/src:/app/statistic/src\n       - ./common/src:/app/common/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n-      # Монтируем target для hot reload\n-      - ./statistic/target:/app/statistic/target\n     networks:\n       - gleb-network\n     depends_on:\n       postgres:\n"
                },
                {
                    "date": 1754264075618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n   # Микросервисы с volume mounts для разработки\n   user-service:\n     build:\n       context: .\n-      dockerfile: Dockerfile.user.dev\n+      dockerfile: user/docker/Dockerfile.dev\n     container_name: gleb-user-service-dev\n     ports:\n       - \"8090:8090\"\n     environment:\n@@ -93,8 +93,9 @@\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./user/src:/app/user/src\n       - ./common/src:/app/common/src\n+      - ./auth/src:/app/auth/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n       # Монтируем target для hot reload\n       - ./user/target:/app/user/target\n@@ -109,9 +110,9 @@\n \n   point-service:\n     build:\n       context: .\n-      dockerfile: Dockerfile.point.dev\n+      dockerfile: point/docker/Dockerfile.dev\n     container_name: gleb-point-service-dev\n     ports:\n       - \"8091:8091\"\n       - \"8062:8062\"\n@@ -120,8 +121,9 @@\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./point/src:/app/point/src\n       - ./common/src:/app/common/src\n+      - ./auth/src:/app/auth/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n     networks:\n       - gleb-network\n@@ -134,9 +136,9 @@\n \n   statistic-service:\n     build:\n       context: .\n-      dockerfile: Dockerfile.statistic.dev\n+      dockerfile: statistic/docker/Dockerfile.dev\n     container_name: gleb-statistic-service-dev\n     ports:\n       - \"8095:8095\"\n     environment:\n@@ -144,8 +146,9 @@\n     volumes:\n       # Монтируем исходный код для hot reload\n       - ./statistic/src:/app/statistic/src\n       - ./common/src:/app/common/src\n+      - ./auth/src:/app/auth/src\n       # Монтируем Maven cache для ускорения сборки\n       - maven_cache:/root/.m2\n     networks:\n       - gleb-network\n"
                }
            ],
            "date": 1754154957102,
            "name": "Commit-0",
            "content": "version: '3.8'\n\nservices:\n  # База данных\n  postgres:\n    image: postgres:15\n    container_name: gleb-postgres-dev\n    environment:\n      POSTGRES_DB: postgres\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - gleb-network\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  # RabbitMQ\n  rabbitmq:\n    image: rabbitmq:3-management\n    container_name: gleb-rabbitmq-dev\n    environment:\n      RABBITMQ_DEFAULT_USER: guest\n      RABBITMQ_DEFAULT_PASS: guest\n    ports:\n      - \"5673:5672\"\n      - \"15673:15672\"\n    volumes:\n      - rabbitmq_data:/var/lib/rabbitmq\n    networks:\n      - gleb-network\n    healthcheck:\n      test: [\"CMD\", \"rabbitmq-diagnostics\", \"ping\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  # Prometheus\n  prometheus:\n    image: prom/prometheus:latest\n    container_name: gleb-prometheus-dev\n    ports:\n      - \"9090:9090\"\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    command:\n      - '--config.file=/etc/prometheus/prometheus.yml'\n      - '--storage.tsdb.path=/prometheus'\n      - '--web.console.libraries=/etc/prometheus/console_libraries'\n      - '--web.console.templates=/etc/prometheus/consoles'\n      - '--storage.tsdb.retention.time=200h'\n      - '--web.enable-lifecycle'\n    networks:\n      - gleb-network\n    depends_on:\n      - postgres\n      - rabbitmq\n\n  # Grafana для визуализации метрик\n  grafana:\n    image: grafana/grafana:latest\n    container_name: gleb-grafana-dev\n    ports:\n      - \"3000:3000\"\n    environment:\n      GF_SECURITY_ADMIN_PASSWORD: admin\n    volumes:\n      - grafana_data:/var/lib/grafana\n    networks:\n      - gleb-network\n    depends_on:\n      - prometheus\n\n  # Микросервисы с volume mounts для разработки\n  user-service:\n    build:\n      context: .\n      dockerfile: Dockerfile.user.dev\n    container_name: gleb-user-service-dev\n    ports:\n      - \"8090:8090\"\n    environment:\n      SPRING_PROFILES_ACTIVE: docker\n      SPRING_DEVTOOLS_RESTART_ENABLED: \"true\"\n      SPRING_DEVTOOLS_LIVERELOAD_ENABLED: \"true\"\n    volumes:\n      # Монтируем исходный код для hot reload\n      - ./user/src:/app/user/src\n      - ./common/src:/app/common/src\n      # Монтируем Maven cache для ускорения сборки\n      - maven_cache:/root/.m2\n      # Монтируем target для hot reload\n      - ./user/target:/app/user/target\n    networks:\n      - gleb-network\n    depends_on:\n      postgres:\n        condition: service_healthy\n      rabbitmq:\n        condition: service_healthy\n    restart: unless-stopped\n\n  point-service:\n    build:\n      context: .\n      dockerfile: Dockerfile.point.dev\n    container_name: gleb-point-service-dev\n    ports:\n      - \"8091:8091\"\n      - \"8062:8062\"\n    environment:\n      SPRING_PROFILES_ACTIVE: docker\n    volumes:\n      # Монтируем исходный код для hot reload\n      - ./point/src:/app/point/src\n      - ./common/src:/app/common/src\n      # Монтируем Maven cache для ускорения сборки\n      - maven_cache:/root/.m2\n    networks:\n      - gleb-network\n    depends_on:\n      postgres:\n        condition: service_healthy\n      rabbitmq:\n        condition: service_healthy\n    restart: unless-stopped\n\n  statistic-service:\n    build:\n      context: .\n      dockerfile: Dockerfile.statistic.dev\n    container_name: gleb-statistic-service-dev\n    ports:\n      - \"8095:8095\"\n    environment:\n      SPRING_PROFILES_ACTIVE: docker\n    volumes:\n      # Монтируем исходный код для hot reload\n      - ./statistic/src:/app/statistic/src\n      - ./common/src:/app/common/src\n      # Монтируем Maven cache для ускорения сборки\n      - maven_cache:/root/.m2\n    networks:\n      - gleb-network\n    depends_on:\n      postgres:\n        condition: service_healthy\n      rabbitmq:\n        condition: service_healthy\n    restart: unless-stopped\n\nvolumes:\n  postgres_data:\n  rabbitmq_data:\n  prometheus_data:\n  grafana_data:\n  maven_cache:\n\nnetworks:\n  gleb-network:\n    driver: bridge "
        }
    ]
}