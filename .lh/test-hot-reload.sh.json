{
    "sourceFile": "test-hot-reload.sh",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1754156730228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1754156730228,
            "name": "Commit-0",
            "content": "#!/bin/bash\n\n# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è hot-reload\n# –î–æ–±–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ hot-reload\n\nset -e\n\n# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m'\n\nprint_message() {\n    echo -e \"${GREEN}[TEST]${NC} $1\"\n}\n\nprint_info() {\n    echo -e \"${BLUE}[INFO]${NC} $1\"\n}\n\nprint_warning() {\n    echo -e \"${YELLOW}[WARNING]${NC} $1\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è user-service\ntest_user_service() {\n    print_message \"–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ hot-reload –¥–ª—è user-service...\"\n    \n    # –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä\n    CONTROLLER_FILE=\"user/src/main/java/com/viancis/user/controller/UserController.java\"\n    \n    if [ ! -f \"$CONTROLLER_FILE\" ]; then\n        print_warning \"–§–∞–π–ª –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω: $CONTROLLER_FILE\"\n        return 1\n    fi\n    \n    # –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é\n    cp \"$CONTROLLER_FILE\" \"${CONTROLLER_FILE}.backup\"\n    \n    # –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π\n    print_info \"–î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä...\"\n    sed -i '' '1i\\\n// HOT RELOAD TEST - '$(date +\"%Y-%m-%d %H:%M:%S\")' - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è hot-reload\n' \"$CONTROLLER_FILE\"\n    \n    print_message \"–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è hot-reload\"\n    print_info \"–û–∂–∏–¥–∞–π—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π...\"\n    \n    # –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ\n    sleep 5\n    \n    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏\n    print_info \"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ user-service...\"\n    docker-compose -f docker-compose.dev.yml logs --tail=20 user-service\n    \n    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª\n    print_info \"–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª...\"\n    mv \"${CONTROLLER_FILE}.backup\" \"$CONTROLLER_FILE\"\n    \n    print_message \"–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è point-service\ntest_point_service() {\n    print_message \"–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ hot-reload –¥–ª—è point-service...\"\n    \n    # –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä\n    CONTROLLER_FILE=\"point/src/main/java/com/viancis/point/controller/PointController.java\"\n    \n    if [ ! -f \"$CONTROLLER_FILE\" ]; then\n        print_warning \"–§–∞–π–ª –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω: $CONTROLLER_FILE\"\n        return 1\n    fi\n    \n    # –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é\n    cp \"$CONTROLLER_FILE\" \"${CONTROLLER_FILE}.backup\"\n    \n    # –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π\n    print_info \"–î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä...\"\n    sed -i '' '1i\\\n// HOT RELOAD TEST - '$(date +\"%Y-%m-%d %H:%M:%S\")' - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è hot-reload\n' \"$CONTROLLER_FILE\"\n    \n    print_message \"–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è hot-reload\"\n    print_info \"–û–∂–∏–¥–∞–π—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π...\"\n    \n    # –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ\n    sleep 5\n    \n    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏\n    print_info \"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ point-service...\"\n    docker-compose -f docker-compose.dev.yml logs --tail=20 point-service\n    \n    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª\n    print_info \"–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª...\"\n    mv \"${CONTROLLER_FILE}.backup\" \"$CONTROLLER_FILE\"\n    \n    print_message \"–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è statistic-service\ntest_statistic_service() {\n    print_message \"–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ hot-reload –¥–ª—è statistic-service...\"\n    \n    # –ù–∞—Ö–æ–¥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä\n    CONTROLLER_FILE=\"statistic/src/main/java/com/viancis/statistic/controller/NotificationController.java\"\n    \n    if [ ! -f \"$CONTROLLER_FILE\" ]; then\n        print_warning \"–§–∞–π–ª –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω: $CONTROLLER_FILE\"\n        return 1\n    fi\n    \n    # –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é\n    cp \"$CONTROLLER_FILE\" \"${CONTROLLER_FILE}.backup\"\n    \n    # –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π\n    print_info \"–î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä...\"\n    sed -i '' '1i\\\n// HOT RELOAD TEST - '$(date +\"%Y-%m-%d %H:%M:%S\")' - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è hot-reload\n' \"$CONTROLLER_FILE\"\n    \n    print_message \"–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è hot-reload\"\n    print_info \"–û–∂–∏–¥–∞–π—Ç–µ 5-10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π...\"\n    \n    # –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ\n    sleep 5\n    \n    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏\n    print_info \"–ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ statistic-service...\"\n    docker-compose -f docker-compose.dev.yml logs --tail=20 statistic-service\n    \n    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª\n    print_info \"–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª...\"\n    mv \"${CONTROLLER_FILE}.backup\" \"$CONTROLLER_FILE\"\n    \n    print_message \"–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!\"\n}\n\n# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞\nmain() {\n    SERVICE=${1:-\"user\"}\n    \n    print_info \"üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ hot-reload —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏\"\n    print_info \"–°–µ—Ä–≤–∏—Å: $SERVICE\"\n    echo \"\"\n    \n    case $SERVICE in\n        \"user\"|\"user-service\")\n            test_user_service\n            ;;\n        \"point\"|\"point-service\")\n            test_point_service\n            ;;\n        \"statistic\"|\"statistic-service\")\n            test_statistic_service\n            ;;\n        \"all\")\n            test_user_service\n            echo \"\"\n            test_point_service\n            echo \"\"\n            test_statistic_service\n            ;;\n        *)\n            print_warning \"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å: $SERVICE\"\n            echo \"–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã: user, point, statistic, all\"\n            exit 1\n            ;;\n    esac\n}\n\n# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏\nmain \"$@\" "
        }
    ]
}