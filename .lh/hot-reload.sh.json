{
    "sourceFile": "hot-reload.sh",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1754155772147,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754156646580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,8 +39,26 @@\n # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞\n restart_service() {\n     local service=$1\n     print_message \"–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ $service...\"\n+    \n+    # –°–Ω–∞—á–∞–ª–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∫–æ–¥\n+    case $service in\n+        \"user-service\")\n+            print_info \"–ö–æ–º–ø–∏–ª—è—Ü–∏—è user —Å–µ—Ä–≤–∏—Å–∞...\"\n+            ./mvnw clean compile -pl user -am -DskipTests\n+            ;;\n+        \"point-service\")\n+            print_info \"–ö–æ–º–ø–∏–ª—è—Ü–∏—è point —Å–µ—Ä–≤–∏—Å–∞...\"\n+            ./mvnw clean compile -pl point -am -DskipTests\n+            ;;\n+        \"statistic-service\")\n+            print_info \"–ö–æ–º–ø–∏–ª—è—Ü–∏—è statistic —Å–µ—Ä–≤–∏—Å–∞...\"\n+            ./mvnw clean compile -pl statistic -am -DskipTests\n+            ;;\n+    esac\n+    \n+    # –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä\n     docker-compose -f docker-compose.dev.yml restart $service\n     print_message \"–°–µ—Ä–≤–∏—Å $service –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω!\"\n }\n \n"
                },
                {
                    "date": 1754156655035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,26 +39,8 @@\n # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞\n restart_service() {\n     local service=$1\n     print_message \"–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ $service...\"\n-    \n-    # –°–Ω–∞—á–∞–ª–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∫–æ–¥\n-    case $service in\n-        \"user-service\")\n-            print_info \"–ö–æ–º–ø–∏–ª—è—Ü–∏—è user —Å–µ—Ä–≤–∏—Å–∞...\"\n-            ./mvnw clean compile -pl user -am -DskipTests\n-            ;;\n-        \"point-service\")\n-            print_info \"–ö–æ–º–ø–∏–ª—è—Ü–∏—è point —Å–µ—Ä–≤–∏—Å–∞...\"\n-            ./mvnw clean compile -pl point -am -DskipTests\n-            ;;\n-        \"statistic-service\")\n-            print_info \"–ö–æ–º–ø–∏–ª—è—Ü–∏—è statistic —Å–µ—Ä–≤–∏—Å–∞...\"\n-            ./mvnw clean compile -pl statistic -am -DskipTests\n-            ;;\n-    esac\n-    \n-    # –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä\n     docker-compose -f docker-compose.dev.yml restart $service\n     print_message \"–°–µ—Ä–≤–∏—Å $service –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω!\"\n }\n \n"
                }
            ],
            "date": 1754155772147,
            "name": "Commit-0",
            "content": "#!/bin/bash\n\n# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ hot reload\n# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./hot-reload.sh [service]\n\nset -e\n\nSERVICE=${1:-\"all\"}\n\n# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m'\n\nprint_message() {\n    echo -e \"${GREEN}[HOT RELOAD]${NC} $1\"\n}\n\nprint_warning() {\n    echo -e \"${YELLOW}[WARNING]${NC} $1\"\n}\n\nprint_info() {\n    echo -e \"${BLUE}[INFO]${NC} $1\"\n}\n\n# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ fswatch\ncheck_fswatch() {\n    if ! command -v fswatch &> /dev/null; then\n        print_warning \"fswatch –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ hot reload:\"\n        echo \"  brew install fswatch\"\n        echo \"\"\n        print_info \"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º: ./dev-deploy.sh update\"\n        exit 1\n    fi\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞\nrestart_service() {\n    local service=$1\n    print_message \"–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ $service...\"\n    docker-compose -f docker-compose.dev.yml restart $service\n    print_message \"–°–µ—Ä–≤–∏—Å $service –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω!\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤\nrestart_all_services() {\n    print_message \"–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤...\"\n    ./quick-rebuild.sh\n    docker-compose -f docker-compose.dev.yml restart user-service point-service statistic-service\n    print_message \"–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã!\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π\nwatch_changes() {\n    local service=$1\n    \n    case $service in\n        \"user\"|\"user-service\")\n            print_info \"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ user-service...\"\n            fswatch -o user/src common/src | while read f; do\n                print_message \"–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ user-service\"\n                restart_service \"user-service\"\n            done\n            ;;\n        \"point\"|\"point-service\")\n            print_info \"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ point-service...\"\n            fswatch -o point/src common/src | while read f; do\n                print_message \"–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ point-service\"\n                restart_service \"point-service\"\n            done\n            ;;\n        \"statistic\"|\"statistic-service\")\n            print_info \"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ statistic-service...\"\n            fswatch -o statistic/src common/src | while read f; do\n                print_message \"–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ statistic-service\"\n                restart_service \"statistic-service\"\n            done\n            ;;\n        \"all\")\n            print_info \"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö...\"\n            fswatch -o user/src point/src statistic/src common/src | while read f; do\n                print_message \"–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ\"\n                restart_all_services\n            done\n            ;;\n        *)\n            print_warning \"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å: $service\"\n            echo \"–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã: user, point, statistic, all\"\n            exit 1\n            ;;\n    esac\n}\n\n# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞\nmain() {\n    print_info \"üî• –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ hot reload\"\n    print_info \"–°–µ—Ä–≤–∏—Å: $SERVICE\"\n    echo \"\"\n    \n    check_fswatch\n    \n    print_info \"–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞\"\n    echo \"\"\n    \n    watch_changes $SERVICE\n}\n\n# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏\nmain \"$@\" "
        }
    ]
}