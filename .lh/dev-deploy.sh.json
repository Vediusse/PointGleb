{
    "sourceFile": "dev-deploy.sh",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1754155527560,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1754155675903,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -121,9 +121,9 @@\n     echo -e \"${BLUE}User Service Metrics:${NC} http://localhost:8090/actuator/prometheus\"\n     echo -e \"${BLUE}Point Service Metrics:${NC} http://localhost:8062/actuator/prometheus\"\n     echo -e \"${BLUE}Statistic Service Metrics:${NC} http://localhost:8095/actuator/prometheus\"\n     echo \"\"\n-    print_message \"üî• Hot Reload –∞–∫—Ç–∏–≤–µ–Ω! –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã.\"\n+    print_message \" Hot Reload –∞–∫—Ç–∏–≤–µ–Ω! –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã.\"\n }\n \n # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)\n rebuild_dev_project() {\n@@ -146,10 +146,10 @@\n \n # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏)\n update_dev_code() {\n     print_message \"–ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞...\"\n-\n     ./quick-rebuild.sh\n+    \n     # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤\n     docker-compose -f docker-compose.dev.yml restart user-service point-service statistic-service\n     \n     print_message \"–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω! –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã.\"\n"
                },
                {
                    "date": 1754155772148,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -146,10 +146,10 @@\n \n # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏)\n update_dev_code() {\n     print_message \"–ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞...\"\n-    ./quick-rebuild.sh\n     \n+    \n     # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤\n     docker-compose -f docker-compose.dev.yml restart user-service point-service statistic-service\n     \n     print_message \"–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω! –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã.\"\n"
                }
            ],
            "date": 1754155527560,
            "name": "Commit-0",
            "content": "#!/bin/bash\n\n# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot reload\n# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./dev-deploy.sh [start|stop|restart|logs|status|rebuild|update]\n\nset -e\n\nPROJECT_NAME=\"gleb-dev\"\n\n# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m' # No Color\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π\nprint_message() {\n    echo -e \"${GREEN}[INFO]${NC} $1\"\n}\n\nprint_warning() {\n    echo -e \"${YELLOW}[WARNING]${NC} $1\"\n}\n\nprint_error() {\n    echo -e \"${RED}[ERROR]${NC} $1\"\n}\n\nprint_header() {\n    echo -e \"${BLUE}================================${NC}\"\n    echo -e \"${BLUE}  GLEB DEVELOPMENT ENVIRONMENT${NC}\"\n    echo -e \"${BLUE}================================${NC}\"\n}\n\n# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Docker –∏ Docker Compose\ncheck_dependencies() {\n    if ! command -v docker &> /dev/null; then\n        print_error \"Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.\"\n        exit 1\n    fi\n    \n    if ! command -v docker-compose &> /dev/null; then\n        print_error \"Docker Compose –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker Compose –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.\"\n        exit 1\n    fi\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏\nstart_dev_project() {\n    print_message \"–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ $PROJECT_NAME –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏...\"\n    \n    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤\n    docker-compose -f docker-compose.dev.yml down 2>/dev/null || true\n    \n    # –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫\n    docker-compose -f docker-compose.dev.yml up -d --build\n    \n    print_message \"–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤...\"\n    sleep 30\n    \n    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤\n    check_dev_services_status\n    \n    print_message \"–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!\"\n    print_dev_service_urls\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞\nstop_dev_project() {\n    print_message \"–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ $PROJECT_NAME...\"\n    docker-compose -f docker-compose.dev.yml down\n    print_message \"–ü—Ä–æ–µ–∫—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞\nrestart_dev_project() {\n    print_message \"–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞ $PROJECT_NAME...\"\n    stop_dev_project\n    start_dev_project\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤\nshow_dev_logs() {\n    if [ -z \"$1\" ]; then\n        print_message \"–ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤...\"\n        docker-compose -f docker-compose.dev.yml logs -f\n    else\n        print_message \"–ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ $1...\"\n        docker-compose -f docker-compose.dev.yml logs -f \"$1\"\n    fi\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤\ncheck_dev_services_status() {\n    print_message \"–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤...\"\n    \n    services=(\"postgres\" \"rabbitmq\" \"prometheus\" \"grafana\" \"user-service\" \"point-service\" \"statistic-service\")\n    \n    for service in \"${services[@]}\"; do\n        if docker-compose -f docker-compose.dev.yml ps | grep -q \"$service.*Up\"; then\n            print_message \"‚úÖ $service - –∑–∞–ø—É—â–µ–Ω\"\n        else\n            print_error \"‚ùå $service - –Ω–µ –∑–∞–ø—É—â–µ–Ω\"\n        fi\n    done\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ URL —Å–µ—Ä–≤–∏—Å–æ–≤\nprint_dev_service_urls() {\n    echo \"\"\n    print_message \"–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (—Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):\"\n    echo -e \"${BLUE}User Service:${NC} http://localhost:8090\"\n    echo -e \"${BLUE}Point Service:${NC} http://localhost:8091\"\n    echo -e \"${BLUE}Statistic Service:${NC} http://localhost:8095\"\n    echo -e \"${BLUE}RabbitMQ Management:${NC} http://localhost:15673 (guest/guest)\"\n    echo -e \"${BLUE}Prometheus:${NC} http://localhost:9090\"\n    echo -e \"${BLUE}Grafana:${NC} http://localhost:3000 (admin/admin)\"\n    echo \"\"\n    print_message \"–ú–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤:\"\n    echo -e \"${BLUE}User Service Metrics:${NC} http://localhost:8090/actuator/prometheus\"\n    echo -e \"${BLUE}Point Service Metrics:${NC} http://localhost:8062/actuator/prometheus\"\n    echo -e \"${BLUE}Statistic Service Metrics:${NC} http://localhost:8095/actuator/prometheus\"\n    echo \"\"\n    print_message \"üî• Hot Reload –∞–∫—Ç–∏–≤–µ–Ω! –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã.\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)\nrebuild_dev_project() {\n    print_warning \"–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)...\"\n    \n    # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤\n    docker-compose -f docker-compose.dev.yml down\n    \n    # –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤\n    docker-compose -f docker-compose.dev.yml down --rmi all\n    \n    # –û—á–∏—Å—Ç–∫–∞ Maven cache\n    docker volume rm gleb_maven_cache 2>/dev/null || true\n    \n    # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫\n    docker-compose -f docker-compose.dev.yml up -d --build\n    \n    print_message \"–ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω!\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏)\nupdate_dev_code() {\n    print_message \"–ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞...\"\n\n    ./quick-rebuild.sh\n    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤\n    docker-compose -f docker-compose.dev.yml restart user-service point-service statistic-service\n    \n    print_message \"–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω! –°–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã.\"\n}\n\n# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞—Ç—É—Å–∞\nshow_dev_status() {\n    print_message \"–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ $PROJECT_NAME:\"\n    docker-compose -f docker-compose.dev.yml ps\n    echo \"\"\n    check_dev_services_status\n}\n\n# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞\nmain() {\n    print_header\n    \n    check_dependencies\n    \n    case \"${1:-start}\" in\n        \"start\")\n            start_dev_project\n            ;;\n        \"stop\")\n            stop_dev_project\n            ;;\n        \"restart\")\n            restart_dev_project\n            ;;\n        \"logs\")\n            show_dev_logs \"$2\"\n            ;;\n        \"status\")\n            show_dev_status\n            ;;\n        \"rebuild\")\n            rebuild_dev_project\n            ;;\n        \"update\")\n            update_dev_code\n            ;;\n        \"help\"|\"-h\"|\"--help\")\n            echo \"–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 [–∫–æ–º–∞–Ω–¥–∞]\"\n            echo \"\"\n            echo \"–ö–æ–º–∞–Ω–¥—ã:\"\n            echo \"  start     - –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)\"\n            echo \"  stop      - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç\"\n            echo \"  restart   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç\"\n            echo \"  logs      - –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤\"\n            echo \"  logs [service] - –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞\"\n            echo \"  status    - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤\"\n            echo \"  rebuild   - –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)\"\n            echo \"  update    - –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (–±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏)\"\n            echo \"  help      - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É\"\n            echo \"\"\n            echo \" –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç:\"\n            echo \"  - Hot reload –∫–æ–¥–∞\"\n            echo \"  - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Maven –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π\"\n            echo \"  - –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏\"\n            ;;\n        *)\n            print_error \"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: $1\"\n            echo \"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ '$0 help' –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.\"\n            exit 1\n            ;;\n    esac\n}\n\n# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏\nmain \"$@\" "
        }
    ]
}